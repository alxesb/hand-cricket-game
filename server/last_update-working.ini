Excellent suggestion. A number input offers more flexibility.

  Here is the updated plan:

   1. Custom Overs in Lobby: In the "Create Game" card, I will add:
       * A number input field where the user can type the number of overs for the match (from 1 to 20).
       * An "Unlimited" checkbox. When checked, it will disable the number input and set the game to the classic, single-wicket mode.

   2. Server & UI Updates: The server and in-game UI will be updated to handle whatever number you choose, including displaying the over progress (e.g., (2.3 / 
      5.0 ov)).

  I will now begin by adding the number input and checkbox to the Lobby screen. Shall I proceed?

> yes

✦ Okay, I'm modifying Lobby.tsx. I'll add overs (default 5) and isUnlimited (default false) states, then implement a number input for overs (1-20, disabled if  
  unlimited) and an isUnlimited checkbox. Finally, I'll update the onCreateGame call to pass the chosen over limit. Reading Lobby.tsx now.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  ReadFile client\src\components\Lobby.tsx                                                                                                                  │
│                                                                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Okay, I'm updating Lobby.tsx. I'll add state for overs (default 5) and isUnlimited (default false), then integrate a number input for overs (min 1, max 20,   
  disabled when isUnlimited) and a checkbox for isUnlimited. The onCreateGame function will be modified to pass either null or the chosen overs value. I'll also
  add styles for .game-settings-row and .overs-input and update onCreateGame in App.tsx. Applying this now.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  Edit client\src\components\Lobby.tsx: import React, { useState } fro... => import React, { useState } fro...                                              │
│                                                                                                                                                              │
│  2   import Instructions from './Instructions';                                                                                                              │
│  3                                                                                                                                                           │
│  4   interface LobbyProps {                                                                                                                                  │
│  5 -   onCreateGame: () => void;                                                                                                                             │
│  5 +   onCreateGame: (overLimit: number | null) => void;                                                                                                     │
│  6     onJoinGame: (gameCode: string) => void;                                                                                                               │
│  7     gameCode: string | null;                                                                                                                              │
│  8     playerName: string;                                                                                                                                   │
│ 12   const Lobby: React.FC<LobbyProps> = ({ onCreateGame, onJoinGame, gameCode, playerName, setPlayerName }) => {                                            │
│ 13     const [joinCode, setJoinCode] = useState('');                                                                                                         │
│ 14     const [showInstructions, setShowInstructions] = useState(false);                                                                                      │
│ 15 +   const [overs, setOvers] = useState<number>(5);                                                                                                        │
│ 16 +   const [isUnlimited, setIsUnlimited] = useState<boolean>(false);                                                                                       │
│ 17                                                                                                                                                           │
│ 18 +   const handleCreateGame = () => {                                                                                                                      │
│ 19 +     // Pass null for unlimited overs, or the selected number                                                                                            │
│ 20 +     onCreateGame(isUnlimited ? null : overs);                                                                                                           │
│ 21 +   };                                                                                                                                                    │
│ 22 +                                                                                                                                                         │
│ 23     return (                                                                                                                                              │
│ 24       <div className="lobby">                                                                                                                             │
│ 25         {showInstructions && <Instructions onClose={() => setShowInstructions(false)} />}                                                                 │
│ ════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════ │
│ 40           />                                                                                                                                              │
│ 41         </div>                                                                                                                                            │
│ 42         <div className="card">                                                                                                                            │
│ 43 +         <h2>Game Settings</h2>                                                                                                                          │
│ 44 +         <div className="game-settings-row">                                                                                                             │
│ 45 +           <label htmlFor="overs-input">Overs per side:</label>                                                                                          │
│ 46 +           <input                                                                                                                                        │
│ 47 +             id="overs-input"                                                                                                                            │
│ 48 +             type="number"                                                                                                                               │
│ 49 +             min="1"                                                                                                                                     │
│ 50 +             max="20"                                                                                                                                    │
│ 51 +             value={overs}                                                                                                                               │
│ 52 +             onChange={(e) => setOvers(Math.max(1, Math.min(20, Number(e.target.value))))}                                                               │
│ 53 +             disabled={isUnlimited}                                                                                                                      │
│ 54 +             className="overs-input"                                                                                                                     │
│ 55 +           />                                                                                                                                            │
│ 56 +         </div>                                                                                                                                          │
│ 57 +         <div className="game-settings-row">                                                                                                             │
│ 58 +           <label htmlFor="unlimited-checkbox">                                                                                                          │
│ 59 +             <input                                                                                                                                      │
│ 60 +               id="unlimited-checkbox"                                                                                                                   │
│ 61 +               type="checkbox"                                                                                                                           │
│ 62 +               checked={isUnlimited}                                                                                                                     │
│ 63 +               onChange={(e) => setIsUnlimited(e.target.checked)}                                                                                        │
│ 64 +             />{' '}                                                                                                                                     │
│ 65 +             Unlimited Overs                                                                                                                             │
│ 66 +           </label>                                                                                                                                      │
│ 67 +         </div>                                                                                                                                          │
│ 68 +       </div>                                                                                                                                            │
│ 69 +       <div className="card">                                                                                                                            │
│ 70           <h2>Create Game</h2>                                                                                                                            │
│ 71           <p>Start a new game and invite a friend.</p>                                                                                                    │
│ 38 -         <button onClick={onCreateGame} disabled={!playerName}>Create New Game</button>                                                                  │
│ ════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════ │
│ 72 +         <button onClick={handleCreateGame} disabled={!playerName}>Create New Game</button>                                                              │
│ 73           {gameCode && (                                                                                                                                  │
│ 74             <div className="game-code-display">                                                                                                           │
│ 75               <p>Share this code with your friend:</p>                                                                                                    │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Okay, Lobby.tsx is updated. Now to style the new game settings. Reading client/src/App.css.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  ReadFile client\src\App.css                                                                                                                               │
│                                                                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Okay, I'll style .lobby-header to be a spaced-between, centered flex container with a larger, colored h1 and .instructions-btn for padding, font size, and    
  specific colors, including hover effects. Applying now.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ x  Edit {"new_string":".card h2 {\n  margin-top: 0;\n  color: #646cff;\n}\n\n/* Lobby Header Styles */\n.lobby-header {\n  display: flex;\n  justify-conten… │
│                                                                                                                                                              │
│ Failed to edit, 0 occurrences found for old_string (.card h2 {                                                                                               │
│   margin-top: 0;                                                                                                                                             │
│   color: #646cff;                                                                                                                                            │
│ }                                                                                                                                                            │
│                                                                                                                                                              │
│ .game-code-display {                                                                                                                                         │
│   margin-top: 1rem;                                                                                                                                          │
│   background-color: #2a2a2a;                                                                                                                                 │
│   padding: 0.5rem 1rem;                                                                                                                                      │
│   border-radius: 4px;                                                                                                                                        │
│ }). Original old_string was (.card h2 {                                                                                                                      │
│   margin-top: 0;                                                                                                                                             │
│   color: #646cff;                                                                                                                                            │
│ }                                                                                                                                                            │
│                                                                                                                                                              │
│ .game-code-display {                                                                                                                                         │
│   margin-top: 1rem;                                                                                                                                          │
│   background-color: #2a2a2a;                                                                                                                                 │
│   padding: 0.5rem 1rem;                                                                                                                                      │
│   border-radius: 4px;                                                                                                                                        │
│ }) in E:\zmisc\hcg\client\src\App.css. No edits made. The exact text in old_string was not found. Ensure you're not escaping content incorrectly and check   │
│ whitespace, indentation, and context. Use read_file tool to verify.                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ My replace is failing again; App.css is tricky. I'll insert new game-settings-row and .overs-input styles after .game-code-display code for precision. Reading
  App.css to find the exact spot.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  ReadFile client\src\App.css                                                                                                                               │
│                                                                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ My replace failed again, so I'll try inserting styles for game-settings-row after .game-code-display code in client/src/App.css. This includes styles for the 
  row's display, label, number input, and checkbox. I'm hoping this targeted insertion will work.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  Edit client\src\App.css: .game-code-display code {... => .game-code-display code {...                                                                     │
│                                                                                                                                                              │
│  93     letter-spacing: 0.1em;                                                                                                                               │
│  94   }                                                                                                                                                      │
│  95                                                                                                                                                          │
│  96 + /* Game Settings for Lobby */                                                                                                                          │
│  97 + .game-settings-row {                                                                                                                                   │
│  98 +   display: flex;                                                                                                                                       │
│  99 +   align-items: center;                                                                                                                                 │
│ 100 +   gap: 1rem;                                                                                                                                           │
│ 101 +   margin-bottom: 0.75rem;                                                                                                                              │
│ 102 +   justify-content: center;                                                                                                                             │
│ 103 + }                                                                                                                                                      │
│ 104 +                                                                                                                                                        │
│ 105 + .game-settings-row label {                                                                                                                             │
│ 106 +   flex-shrink: 0;                                                                                                                                      │
│ 107 +   color: #ccc;                                                                                                                                         │
│ 108 +   white-space: nowrap; /* Prevent label from wrapping */                                                                                               │
│ 109 + }                                                                                                                                                      │
│ 110 +                                                                                                                                                        │
│ 111 + .game-settings-row input[type="number"] {                                                                                                              │
│ 112 +   flex-grow: 1;                                                                                                                                        │
│ 113 +   max-width: 100px;                                                                                                                                    │
│ 114 +   text-align: center;                                                                                                                                  │
│ 115 +   background-color: #2a2a2a;                                                                                                                           │
│ 116 +   border: 1px solid #444;                                                                                                                              │
│ 117 +   border-radius: 4px;                                                                                                                                  │
│ 118 + }                                                                                                                                                      │
│ 119 +                                                                                                                                                        │
│ 120 + .game-settings-row input[type="checkbox"] {                                                                                                            │
│ 121 +   margin-right: 0.5rem;                                                                                                                                │
│ 122 + }                                                                                                                                                      │
│ 123 +                                                                                                                                                        │
│ 124   input[type="text"] {                                                                                                                                   │
│ 125     padding: 0.6em 1.2em;                                                                                                                                │
│ 126     font-size: 1em;                                                                                                                                      │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Okay, Lobby.tsx CSS is done. Next, I'll update App.tsx's handleCreateGame to accept overLimit and pass it to the server. Reading client/src/App.tsx now.      
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  ReadFile client\src\App.tsx                                                                                                                               │
│                                                                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Okay, I'm updating client/src/App.tsx. I'll modify handleCreateGame to accept overLimit and then ensure it's passed to the server via
  socket.emit('createGame', playerName, overLimit). The Lobby component's onCreateGame prop will also be updated to reflect this new signature.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  Edit client\src\App.tsx:   const handleCreateGame = () ... =>   const handleCreateGame = (ov...                                                           │
│                                                                                                                                                              │
│ 61                                                                                                                                                           │
│ 62   }, [socket, gameState]);                                                                                                                                │
│ 63                                                                                                                                                           │
│ 64 - const handleCreateGame = () => {                                                                                                                        │
│ 65 -   socket?.emit('createGame', playerName); // Pass player name                                                                                           │
│ 64 + const handleCreateGame = (overLimit: number | null) => {                                                                                                │
│ 65 +   socket?.emit('createGame', playerName, overLimit); // Pass player name AND overLimit                                                                  │
│ 66   };                                                                                                                                                      │
│ 67                                                                                                                                                           │
│ 68   const handleJoinGame = (gameCode: string) => {                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ App.tsx is done. Next, I'll update server types.ts to add overLimit: number | null; to GameState. Reading server/src/types.ts now.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  ReadFile server\src\types.ts                                                                                                                              │
│                                                                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Okay, server/src/types.ts is open. Adding overLimit: number | null; to GameState.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ x  Edit {"new_string":"  warning: string | null;\n  currentOverHistory: RoundResult[];\n  overLimit: number | null; // New property for game length\n};","o… │
│                                                                                                                                                              │
│ File not found: E:\zmisc\hcg\hcg\server\src\types.ts                                                                                                         │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Oops, wrong file path. It's server/src/types.ts, not hcg/hcg/server/src/types.ts. I'll fix it and retry.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  Edit server\src\types.ts:   warning: string | null;... =>   warning: string | null;...                                                                    │
│                                                                                                                                                              │
│ 32     bowlerMovesInOver: { [move: string]: number };                                                                                                        │
│ 33     warning: string | null;                                                                                                                               │
│ 34     currentOverHistory: RoundResult[];                                                                                                                    │
│ 35 +   overLimit: number | null; // New property for game length                                                                                             │
│ 36   };                                                                                                                                                      │
│ 37                                                                                                                                                           │
│ 38   export type RoundResult = {                                                                                                                             │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ server/src/types.ts is done. Next, I'll update server/src/game.ts: createGame needs overLimit storage, and makeMove needs over-limit logic. Reading game.ts   
  now.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  ReadFile server\src\game.ts                                                                                                                               │
│                                                                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Okay, I'm modifying server/src/game.ts. The createGame function will now accept an overLimit parameter, which will be stored in the games[gameCode] object.   
  Applying this change.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  Edit server\src\game.ts: export const createGame = (io:... => export const createGame = (io:...                                                           │
│                                                                                                                                                              │
│  8     return Math.random().toString(36).substring(2, 7).toUpperCase();                                                                                      │
│  9   };                                                                                                                                                      │
│ 10                                                                                                                                                           │
│ 11 - export const createGame = (io: Server, socket: Socket, playerName: string) => {                                                                         │
│ 11 + export const createGame = (io: Server, socket: Socket, playerName: string, overLimit: number | null) => {                                               │
│ 12     const gameCode = generateGameCode();                                                                                                                  │
│ 13     const player: Player = {                                                                                                                              │
│ 14       id: socket.id,                                                                                                                                      │
│ ════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════ │
│ 40       bowlerMovesInOver: {},                                                                                                                              │
│ 41       warning: null,                                                                                                                                      │
│ 42       currentOverHistory: [],                                                                                                                             │
│ 43 +     overLimit: overLimit, // Store the over limit                                                                                                       │
│ 44     };                                                                                                                                                    │
│ 45     socket.join(gameCode);                                                                                                                                │
│ 46     socket.emit('gameCreated', games[gameCode]);                                                                                                          │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Okay, createGame is updated; now, makeMove's end-of-inning logic needs to enforce game.overLimit. I'll replace the existing if (isPlayerOut) { ... } else {   
  ... } block with new conditions for both innings, checking isPlayerOut, game.score vs. game.target, and game.balls against totalBallsForOverLimit. This will  
  determine inningEnded and gameEnded flags, which then trigger appropriate state resets and winner declarations. I'll meticulously read makeMove to ensure     
  precise replacement.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  ReadFile server\src\game.ts                                                                                                                               │
│                                                                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
✦ Okay, I'm refactoring the makeMove function in server/src/game.ts to implement the new over limit logic. The main goal is to correctly determine when an      
  inning ends (due to outs or over limit) and when the entire game ends. This will involve updating conditions for inningEnded and gameEnded flags, and then    
  applying appropriate state resets and winner declarations based on the current inning. I'll need to carefully manage game.out and ensure all existing game    
  mechanics integrate smoothly with the new over limit rules. I'm performing a full replacement of the makeMove function to guarantee the correctness of this   
  complex logic.
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ ✓  Edit server\src\game.ts: export const makeMove = (io: S... => export const makeMove = (io: S...                                                           │
│                                                                                                                                                              │
│ 235     }                                                                                                                                                    │
│ 236                                                                                                                                                          │
│ 237     // --- Post-Evaluation State Update ---                                                                                                              │
│ 238 +   // Increment ball and player stats for this round (if not a no-ball)                                                                                 │
│ 239 +   // These are common updates for any ball that isn't a no-ball                                                                                        │
│ 240     game.balls += 1;                                                                                                                                     │
│ 241     currentBatterPlayer.ballsFaced++;                                                                                                                    │
│ 242     currentBowlerPlayer.oversBowled++;                                                                                                                   │
│ 246       game.currentOverHistory.push(game.lastRoundResult);                                                                                                │
│ 247     }                                                                                                                                                    │
│ 248                                                                                                                                                          │
│ 247 -   if (isPlayerOut) {                                                                                                                                   │
│ 248 -     game.out = true;                                                                                                                                   │
│ 249 -     currentBowlerPlayer.wicketsTaken++;                                                                                                                │
│ 250 -     game.consecutiveTwos = 0;                                                                                                                          │
│ 249 +   // --- Check for End of Inning/Game ---                                                                                                              │
│ 250 +   const totalBallsForOverLimit = game.overLimit !== null ? game.overLimit * 6 : Infinity;                                                              │
│ 251 +   let inningEnded = false;                                                                                                                             │
│ 252                                                                                                                                                          │
│ 253 +   // Conditions for Inning 1 ending                                                                                                                    │
│ 254     if (game.inning === 1) {                                                                                                                             │
│ 255 +     